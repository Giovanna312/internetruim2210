</body>
<title>fofoletes</title>
<link rel="stylesheet" href="styles.css">
</html><h3>Lista de fofoletes</h3>
<table id="tabelaAlunos" border="1">
    <thead>
        <tr>
            <th>Nome</th>
            <th>Nascimento</th>
            <th>Telefone</th>
            <th>Endereço</th>
            <th>Excluir</th>
        </tr>
    </thead>
    <tbody>
        <!-- Linhas preenchidas pelo JavaScript -->
    </tbody>
</table>

<script>
    var token = "147ce85b42c14278b7373a148b7fbc61";
    // Exemplo de requisição GET para listar pessoas
    fetch("https://crudcrud.com/api/" + token + "/pessoas")
        .then(response => response.json())
        .then(data => botaTabela(data))
        .catch(error => console.error("Erro no GET:", error));

    //criamos a função bota tabela que recebe os dados das pessoas
    function botaTabela(pessoas) {
        console.log(pessoas)
        //cria a variável tabela que pega o corpo da tabela pelo id
        //pega a tag tbody dentro da tabela
        //[0] pq getElementByTagName retorna um array e queremos o seu primeiro elemento
        var tabela = document.getElementById("tabelaAlunos").getElementsByTagName("tbody")[0];
        //inserir os dados na tabela da partir da variável pessoas
        pessoas.forEach(function (elementoQueEstaSendoPercorrido){
            //criamos uma linha usando uma função do javascript
            var linha = tabela.insertRow();
            var celulaNome = linha.insertCell(0);
            var celulaNascimento = linha.insertCell(1);
            var celulaTelefone = linha.insertCell(2);
            var celulaEndereco = linha.insertCell(3);
            var celulaExcluir = linha.insertCell(4);

            celulaNome.innerHTML = elementoQueEstaSendoPercorrido.nome;
            celulaNascimento.innerHTML = elementoQueEstaSendoPercorrido.nascimento;
            celulaTelefone.innerHTML = elementoQueEstaSendoPercorrido.telefone;
            celulaEndereco.innerHTML = elementoQueEstaSendoPercorrido.endereco;
            celulaExcluir.innerHTML = '<button onclick="excluir(\'' + elementoQueEstaSendoPercorrido._id + '\')">Excluir</button>';

   

        });
    }
   
        
    function excluir(id){
        var token = "147ce85b42c14278b7373a148b7fbc61";
        fetch("https://crudcrud.com/api/"+token+"/pessoas/" + id, {
            method: "DELETE"
        })
     .finally (() => {
        setTimeout(window.location.href = "pag2.html", 2000)
     });

    }


</script>
</div>
<a href="index.html" class="voltar">voltar</a>
</div>